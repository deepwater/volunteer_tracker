.row
	.span9
		%h2 
			= @department.name
		
			= link_to 'Edit', edit_admin_department_path(@department), class: 'btn btn-mini'

			= link_to 'Delete', admin_department_path(@department), class: 'btn btn-mini btn-danger', method: :delete, data: { confirm: 'Are you sure?' }

.row
	.span9
		%p
			%b Department Email:
			= @department.email
		%br
.row
	.span9
		%p
			%b Budgeted Hours:
			= @department.budgeted_hours
		%br
.row
	.span5
		%h3
			%i.halflings-icon.edit
			Department Managers

		- if @department.department_managers.length == 0
			.alert.alert-error
				%strong Warning!
				No Department Managers Assigned 
			%button.btn.btn-primary{:type=>"button", :href=> "#assign_department_managers", :data => {:toggle => "modal"}} 
				Assign Department Managers

		- else 
			%table.table.table-bordered.table-striped
				%tr
					%th Name
					%th Actions
				- @department.department_managers.each do |department_manager|
					%tr
						%td= department_manager.user.full_name
						%td
							= link_to admin_department_manager_path(DepartmentManager.where(department_id: @department.id, user_id: department_manager.user.id).all), :confirm => 'Are you sure?', :method => :delete, :remote=>true, :"data-type" => "json", :class => 'unassign-department-manager btn btn-danger' do
								%i.icon-remove-sign.icon-white
								Unassign

			%button.btn.btn-primary{:type=>"button", :href=> "#assign_department_managers", :data => {:toggle => "modal"}} 
				Assign Department Managers

		%br
		%br
		%hr

.row
	.span5
		%h3
			%i.halflings-icon.edit
			Department Assistants

		- if @department.department_assistants.length == 0
			.alert.alert-error
				%strong Warning!
				No Department Assistants Assigned 
			%button.btn.btn-primary{:type=>"button", :href=> "#assign_department_assistants", :data => {:toggle => "modal"}} 
				Assign Department Assistants

		- else 
			%table.table.table-bordered.table-striped
				%tr
					%th Name
					%th Actions
				- @department.department_assistants.each do |department_assistant|
					%tr
						%td= department_assistant.user.full_name
						%td
							= link_to admin_department_assistant_path(DepartmentAssistant.where(department_id: @department.id, user_id: department_assistant.user.id).all), :confirm => 'Are you sure?', :method => :delete, :remote=>true, :"data-type" => "json", :class => 'unassign-department-assistant btn btn-danger' do
								%i.icon-remove-sign.icon-white
								Unassign
							%button.btn.btn-info{ type: "button", href: "#assign_department_blocks_#{department_assistant.user.id}", data: { toggle: "modal" } }
								%i.icon-warning-sign.icon-white
								Restrict Access
							= render "dashboard/departments/department_blocks_modal", department_blocks: @department.department_blocks, user: department_assistant.user

			%button.btn.btn-primary{:type=>"button", :href=> "#assign_department_assistants", :data => {:toggle => "modal"}} 
				Assign Department Assistants



%div{:class =>"modal large hide fade", :id => "assign_department_managers"}
	.modal-header
		%button{:type=>"button", :class=>"close", :data => {:dismiss=>"modal"}}
			&times;
		%h3 Assign Department Managers
	.modal-body
		- if @department_managers.empty?
			.alert.alert-error
				%strong Warning!
				No Department Managers Available. You need to promote a volunteer to the Department Manager role before you can assign them to this department.
		- else
			%p Here is a list of users you can add as a Department Manager

			%table.table.table-bordered.table-striped.dataTables
				%thead
					%th Name
					%th Assign as Department Manager

				- @department_managers.each do |user|
					%tr
						%td= user.full_name
						%td
							= simple_form_for [:admin, DepartmentManager.new], html: { data: { type: :json } } do |f|
								= f.input :user_id, as: :hidden, input_html: { value: user.id }
								= f.input :department_id, as: :hidden, input_html: { value: @department.id }

								= button_tag type: "submit", class: 'btn btn-success' do 
									%i.icon-ok-sign.icon-white
									Assign

%div{:class =>"modal large hide fade", :id => "assign_department_assistants"}
	.modal-header
		%button{:type=>"button", :class=>"close", :data => {:dismiss=>"modal"}}
			&times;
		%h3 Assign Department Assistants
	.modal-body

		- if @department_assistants.length == 0
			.alert.alert-error
				%strong Warning!
				No Department Assistants Available. You need to promote a volunteer to the Department Assistant role before you can assign them to this department.
		- else
			%p Here is a list of users you can add as a Department Assistant

			%table.table.table-bordered.table-striped.dataTables
				%thead
					%th Name
					%th Assign as Department Assistant

				- @department_assistants.each do |user|
					%tr
						%td= user.full_name
						%td
							= simple_form_for [:admin, DepartmentAssistant.new], html: { data: { type: :json } } do |f|
								= f.input :user_id, as: :hidden, input_html: { value: user.id }
								= f.input :department_id, as: :hidden, input_html: { value: @department.id }

								= button_tag type: "submit", class: 'btn btn-success' do 
									%i.icon-ok-sign.icon-white
									Assign

